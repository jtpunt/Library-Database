<%- include ('partials/header') %>
<nav class="navbar navbar-inverse navbar-fixed" id="left-sidebar-wrapper" role="navigation" style="height: 70%;">
    <ul class="nav sidebar-nav">
        <li class="sidebar-brand">
            <h4 style="text-align: center;">Filter By</h4>
        </li>
    </ul>
    <form action="/books/filter" method="get">
        <label for="publisher_id">Filter By Publisher</label><br>
        <select name="publisher_id" class="mySelections">
            <% Publishers.forEach(function(publisher){ %>
                <option value="<%=publisher.publisher_id%>"><%=publisher.publisher_name%></option>
            <% }); %>
        </select><button>Submit</button><br>
    </form><br>
    <form action="/books/filter" method="get">
        <label for="author_id">Filter By Author</label><br>
        <select name="author_id" class="mySelections">
            <% Authors.forEach(function(author){ %>
                <option value="<%=author.publisher_id%>"><%=author.author_name%></option>
            <% }); %>
        </select><button>Submit</button>
    </form><br>
    <form action="/books/filter" method="get">
        <label for="genre_id">Filter By Genres</label><br>
        <select name="genre_id" class="mySelections">
            <% Genres.forEach(function(genre){ %>
                <option value="<%=genre.genre_id%>"><%=genre.genre_name%></option>
            <% }); %>
        </select><button>Submit</button><br>
    </form>
</nav>
<div id="maincontent" style="overflow: scroll;">
<% Books.forEach(function(book){ %>
    <div class="row" style="height: 27%; border: 1px solid #bdc3c7;"> 
        <div class="thumbnail" style="float: left;">
            <img src="<%=book.img_file_url%>">
        </div>
        <div style="float: left; margin-left: 1%; margin-top: 1%;">
            <p>Title: <%=book.title%></p>
            <p>Pages: <%=book.pages%></p>
            <p>Author: <%=book.Author_Name%></p>
            <p>Publisher Name: <%=book.publisher_name%></p>
            <p>Genre: <%=book.genre_name%></p>
            <p>Copies Available: <%=book.Copies_Available%></p>
            <div class="popup" onclick="showPopup(this)">Click To View Description
                <span class="popuptext"><%=book.description%></span>
            </div>
        </div>
        <div style="float: right;">
            <h5>Check Out Book As Patron
            <select id="<%=book.isbn%>" name="patron_id">
                <% Patrons.forEach(function(patron){ %>
                    <option value="<%=patron.patron_id%>"><%=patron.patron_name%></option>
                <% }); %>
            </select>
            <button onclick="checkOutBook('<%=book.isbn%>')">Submit</button></h5>
            <h5>Edit Book <button onclick="location.href='/books/<%=book.isbn%>/edit'">Update</a></h5>
            <h5>Delete Book <button onclick="deleteFromDB('<%=book.isbn%>')">Submit</button></h5>
        </div>
    </div>
<% }); %>
</div>
<%- include ('partials/footer') %>